<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Ã‰metteur</title>
</head>
<body>
  <h2>ğŸ“± Ã‰metteur (tÃ©lÃ©phone)</h2>
  <p>Mon ID PeerJS : <span id="my-id">...</span></p>
  <video id="localVideo" autoplay muted playsinline style="width: 100%; max-width: 300px;"></video>

  <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
  <script>
    const peer = new Peer();

    peer.on('open', id => {
      document.getElementById('my-id').textContent = id;
    });

    navigator.mediaDevices.getUserMedia({ video: true, audio: true })
      .then(stream => {
        document.getElementById('localVideo').srcObject = stream;

        peer.on('call', call => {
          call.answer(stream);
        });
      })
      .catch(err => alert("Erreur accÃ¨s camÃ©ra/micro : " + err));
  </script>
</body>
</html>
